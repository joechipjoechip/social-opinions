<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Reddit Resume</title>
        <script src="js/lib/d3.min.js"></script>
        <link rel="stylesheet" href="styles.css">
    </head>
    <body>
        <button id="summarizeBtn">Analyser les commentaires</button>
        <div id="loading" class="loading" style="display: none;">Analyse en cours...</div>
        <div id="error" class="error" style="display: none;"></div>

        <div class="visualization-container" style="display: block;">
            <div class="charts-grid">
                <div class="chart-container">
                    <h3>Distribution des Opinions</h3>
                    <p class="chart-description">RÃ©partition des opinions principales et leur popularitÃ© basÃ©e sur les votes</p>
                    <div id="sentimentChart"><svg width="600" height="350"><g transform="translate(180,40)"><rect y="22.727272727272734" x="0" width="300" height="90.9090909090909" fill="#FF4500" opacity="0.7"></rect><rect y="136.36363636363637" x="0" width="240" height="90.9090909090909" fill="#FF4500" opacity="0.7"></rect><g fill="none" font-size="10" font-family="sans-serif" text-anchor="end"><path class="domain" stroke="currentColor" d="M-6,0.5H0.5V250.5H-6"></path><g class="tick" opacity="1" transform="translate(0,68.18181818181819)"><line stroke="currentColor" x2="-6"></line><text fill="currentColor" x="-9" dy="0.32em"><tspan x="0" dy="0.32em">L'Europe offre une stabilité économique et un faible risque d'investissement.</tspan></text></g><g class="tick" opacity="1" transform="translate(0,181.8181818181818)"><line stroke="currentColor" x2="-6"></line><text fill="currentColor" x="-9" dy="0.32em"><tspan x="0" dy="0.32em">L'Europe offre une stabilité économique et un faible risque d'investissement.</tspan></text></g></g><g transform="translate(0,250)" fill="none" font-size="10" font-family="sans-serif" text-anchor="middle"><path class="domain" stroke="currentColor" d="M0.5,6V0.5H300.5V6"></path><g class="tick" opacity="1" transform="translate(0.5,0)"><line stroke="currentColor" y2="6"></line><text fill="currentColor" y="9" dy="0.71em">0</text></g><g class="tick" opacity="1" transform="translate(30.5,0)"><line stroke="currentColor" y2="6"></line><text fill="currentColor" y="9" dy="0.71em">10</text></g><g class="tick" opacity="1" transform="translate(60.5,0)"><line stroke="currentColor" y2="6"></line><text fill="currentColor" y="9" dy="0.71em">20</text></g><g class="tick" opacity="1" transform="translate(90.5,0)"><line stroke="currentColor" y2="6"></line><text fill="currentColor" y="9" dy="0.71em">30</text></g><g class="tick" opacity="1" transform="translate(120.5,0)"><line stroke="currentColor" y2="6"></line><text fill="currentColor" y="9" dy="0.71em">40</text></g><g class="tick" opacity="1" transform="translate(150.5,0)"><line stroke="currentColor" y2="6"></line><text fill="currentColor" y="9" dy="0.71em">50</text></g><g class="tick" opacity="1" transform="translate(180.5,0)"><line stroke="currentColor" y2="6"></line><text fill="currentColor" y="9" dy="0.71em">60</text></g><g class="tick" opacity="1" transform="translate(210.5,0)"><line stroke="currentColor" y2="6"></line><text fill="currentColor" y="9" dy="0.71em">70</text></g><g class="tick" opacity="1" transform="translate(240.5,0)"><line stroke="currentColor" y2="6"></line><text fill="currentColor" y="9" dy="0.71em">80</text></g><g class="tick" opacity="1" transform="translate(270.5,0)"><line stroke="currentColor" y2="6"></line><text fill="currentColor" y="9" dy="0.71em">90</text></g><g class="tick" opacity="1" transform="translate(300.5,0)"><line stroke="currentColor" y2="6"></line><text fill="currentColor" y="9" dy="0.71em">100</text></g></g><text class="value-label" x="305" y="68.18181818181819" dy="0.35em">100</text><text class="value-label" x="245" y="181.8181818181818" dy="0.35em">80</text></g></svg></div>
                </div>
                <div class="chart-container">
                    <h3>Points de Consensus</h3>
                    <p class="chart-description">Visualisation des sujets sur lesquels la communautÃ© s'accorde</p>
                    <div id="topicsChart"><svg width="600" height="350"><g transform="translate(300,175)"><path d="M0,-125A125,125,0,1,1,-42.753,117.462L-25.652,70.477A75,75,0,1,0,0,-75Z" fill="rgb(34, 150, 79)" stroke="white" style="stroke-width: 2px;"></path><path d="M-42.753,117.462A125,125,0,0,1,0,-125L0,-75A75,75,0,0,0,-25.652,70.477Z" fill="rgb(100, 188, 97)" stroke="white" style="stroke-width: 2px;"></path><polyline points="98.4807753012208,17.364817766693037,135.4110660391786,23.876624429202923,137.5,23.876624429202923" style="fill: none; stroke: rgb(153, 153, 153);"></polyline><polyline points="-98.48077530122082,-17.364817766693,-135.41106603917862,-23.876624429202877,-137.5,-23.876624429202877" style="fill: none; stroke: rgb(153, 153, 153);"></polyline><text transform="translate(150,23.876624429202923)" style="text-anchor: start;">L'Europe est une région politiquement stable.<tspan x="0" dy="1.2em" style="font-size: 0.8em;">90% accord</tspan></text><text transform="translate(-150,-23.876624429202877)" style="text-anchor: end;">L'Europe dispose d'une main-d'œuvre hautement q...<tspan x="0" dy="1.2em" style="font-size: 0.8em;">80% accord</tspan></text></g></svg></div>
                </div>
                <div class="chart-container">
                    <h3>Points de Friction</h3>
                    <p class="chart-description">Comparaison des opinions opposÃ©es et leur support respectif</p>
                    <div id="scoresChart"><svg width="600" height="350"><g transform="translate(180,40)"><g fill="none" font-size="10" font-family="sans-serif" text-anchor="end"><path class="domain" stroke="currentColor" d="M-6,0.5H0.5V250.5H-6"></path><g class="tick" opacity="1" transform="translate(0,125)"><line stroke="currentColor" x2="-6"></line><text fill="currentColor" x="-9" dy="0.32em"><tspan x="0" dy="0.32em">L'impact du Brexit sur l'investissement en Europe.</tspan></text></g></g><g transform="translate(0,250)" fill="none" font-size="10" font-family="sans-serif" text-anchor="middle"><path class="domain" stroke="currentColor" d="M0.5,6V0.5H300.5V6"></path><g class="tick" opacity="1" transform="translate(30.5,0)"><line stroke="currentColor" y2="6"></line><text fill="currentColor" y="9" dy="0.71em">âˆ’60</text></g><g class="tick" opacity="1" transform="translate(70.5,0)"><line stroke="currentColor" y2="6"></line><text fill="currentColor" y="9" dy="0.71em">âˆ’40</text></g><g class="tick" opacity="1" transform="translate(110.49999999999999,0)"><line stroke="currentColor" y2="6"></line><text fill="currentColor" y="9" dy="0.71em">âˆ’20</text></g><g class="tick" opacity="1" transform="translate(150.5,0)"><line stroke="currentColor" y2="6"></line><text fill="currentColor" y="9" dy="0.71em">0</text></g><g class="tick" opacity="1" transform="translate(190.5,0)"><line stroke="currentColor" y2="6"></line><text fill="currentColor" y="9" dy="0.71em">20</text></g><g class="tick" opacity="1" transform="translate(230.50000000000003,0)"><line stroke="currentColor" y2="6"></line><text fill="currentColor" y="9" dy="0.71em">40</text></g><g class="tick" opacity="1" transform="translate(270.5,0)"><line stroke="currentColor" y2="6"></line><text fill="currentColor" y="9" dy="0.71em">60</text></g></g><rect class="opinion1" y="41.66666666666667" x="0" width="150" height="166.66666666666666" fill="#FF4500" opacity="0.7"></rect><rect class="opinion2" y="41.66666666666667" x="150" width="100" height="166.66666666666666" fill="#0079D3" opacity="0.7"></rect><text class="value-label" x="-5" y="125" text-anchor="end" dy="0.35em">75</text><text class="value-label" x="255" y="125" dy="0.35em">50</text></g></svg></div>
                </div>
                <div class="chart-container">
                    <h3>Groupes d'Opinions</h3>
                    <p class="chart-description">Vue d'ensemble des groupes d'opinions similaires et leur poids dans la discussion</p>
                    <div id="controversyChart"><svg width="600" height="350"><g transform="translate(181,41)"><rect width="232" height="141" fill="rgb(254, 186, 87)"></rect><text x="4" y="4"><tspan x="4" dy="0" fill="white" style="font-size: 1em;">Opinions positives sur l'in...</tspan><tspan x="4" dy="1.2em" fill="white" style="font-size: 0.8em;">35.0%</tspan><tspan x="4" dy="1.2em" fill="white" style="font-size: 0.8em;">200 votes</tspan></text></g><g transform="translate(181,183)"><rect width="232" height="106" fill="rgb(254, 214, 118)"></rect><text x="4" y="4"><tspan x="4" dy="0" fill="white" style="font-size: 1em;">Opinions mitigées sur l'inv...</tspan><tspan x="4" dy="1.2em" fill="white" style="font-size: 0.8em;">25.0%</tspan><tspan x="4" dy="1.2em" fill="white" style="font-size: 0.8em;">150 votes</tspan></text></g><g transform="translate(414,41)"><rect width="65" height="248" fill="rgb(255, 233, 152)"></rect><text x="4" y="4"><tspan x="4" dy="0" fill="white" style="font-size: 1em;">Opinions négatives sur l'in...</tspan><tspan x="4" dy="1.2em" fill="white" style="font-size: 0.8em;">15.0%</tspan><tspan x="4" dy="1.2em" fill="white" style="font-size: 0.8em;">100 votes</tspan></text></g></svg></div>
                </div>
            </div>

            <div id="summary">
                <div class="stat-card">
                    <h3>Vue d'Ensemble</h3>
                    <div id="overviewContent">
            <div class="stat-value">123</div>
            <p>commentaires analysés</p>
            <p><strong>Opinion dominante :</strong> L'investissement en Europe est une opportunité judicieuse en raison de la stabilité économique et des perspectives de croissance.</p>
            <p><strong>Niveau de consensus :</strong> 75%</p>
        </div>
                </div>
                <div class="stat-card">
                    <h3>Opinions Principales</h3>
                    <div id="topCommentsContent">
            <div class="stat-card">
                <p><strong>L'Europe offre une stabilité économique et un faible risque d'investissement.</strong></p>
                <p>L'Europe a une longue histoire de stabilité politique et économique, ce qui en fait un endroit sûr pour investir.</p>
                <div style="display: flex; justify-content: space-between; margin-top: 8px;">
                    <span>Votes: <strong>100</strong></span>
                    <span>Commentaires: <strong>5</strong></span>
                </div>
            </div>
        
            <div class="stat-card">
                <p><strong>L'Europe dispose d'un marché en pleine croissance avec un potentiel de rendements élevés.</strong></p>
                <p>L'Europe est la deuxième plus grande économie mondiale et abrite des industries en plein essor telles que la technologie et les énergies renouvelables.</p>
                <div style="display: flex; justify-content: space-between; margin-top: 8px;">
                    <span>Votes: <strong>80</strong></span>
                    <span>Commentaires: <strong>4</strong></span>
                </div>
            </div>
        </div>
                </div>
                <div class="stat-card">
                    <h3>Points de DÃ©saccord</h3>
                    <div id="controversialContent">
            <div class="controversy-item">
                <div style="display: flex; justify-content: space-between;">
                    <strong>L'impact du Brexit sur l'investissement en Europe.</strong>
                    <span class="intensity">Intensité: 8/10</span>
                </div>
                <div style="margin-top: 8px;">
                    <div>
                        <strong>Position 1 (75 votes):</strong>
                        <p>Le Brexit aura un impact négatif sur l'investissement en Europe.</p>
                    </div>
                    <div>
                        <strong>Position 2 (50 votes):</strong>
                        <p>Le Brexit aura un impact positif sur l'investissement en Europe.</p>
                    </div>
                </div>
            </div>
        </div>
                </div>
            </div>
        </div>

        <script type="module" src="js/services/gemini.service.js"></script>
        <script type="module" src="js/visualizations.js"></script>
        <script type="module" src="popup.js"></script>


    </body>
</html>